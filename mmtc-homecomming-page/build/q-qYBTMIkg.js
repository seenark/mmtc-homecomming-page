import{f as i,o as m,L as f,F as _,j as l,A as u,g as r,_ as c,v as p}from"./q-eghB3vhi.js";import{s as b}from"./q-qR86fJ-u.js";const g=()=>{const[e]=i(),t=e.value.filter(n=>isNaN(+n.classNumber)).sort((n,s)=>n.classNumber.localeCompare(s.classNumber));return[...e.value.filter(n=>!isNaN(+n.classNumber)).sort((n,s)=>+n.classNumber-+s.classNumber),...t]},w=async()=>{const[e]=i(),t=await b.from("Register2567").select("*").order("classNumber").order("name");if(t.error!==null){console.warn(t.error);return}console.log("data",t.data),e.value=t.data},x=()=>{const e=m([]),t=f(r(()=>c(()=>Promise.resolve().then(()=>d),void 0),"s_qsZY38OVQ20",[e]));return _(r(()=>c(()=>Promise.resolve().then(()=>d),void 0),"s_fH10cqBgBX0",[e])),_(r(()=>c(()=>Promise.resolve().then(()=>d),void 0),"s_d2tezVafCPo",[e])),l("div",null,{class:"mx-auto flex h-[calc(100vh-100px)] w-full max-w-[1280px] flex-col items-center gap-8 pt-16"},[l("h1",null,{class:"text-2xl"},"2567",3,null),l("div",null,{class:"flex w-full items-center justify-between"},[l("h6",null,null,["ตารางนี้เรียงลำดับจาก ",l("u",null,null,'"เลขรุ่น"',3,null)," ตามด้วย ",l("u",null,null,'"ชื่อ"',3,null)],3,null),l("button",null,{class:"btn btn-sm bg-white text-black",onClick$:r(()=>c(()=>Promise.resolve().then(()=>d),void 0),"s_w0AFpKHL9eo",[e,t])},"Download CSV",3,null)],3,null),l("div",null,{class:"w-full overflow-x-auto rounded-lg outline outline-2 outline-offset-4 outline-white/50"},l("table",null,{class:"table table-pin-rows"},[l("thead",null,null,l("tr",null,{class:"bg-slate-50 text-lg text-black"},[l("th",null,null,"system id",3,null),l("th",null,null,"รุ่น",3,null),l("th",null,null,"ชื่อ - นามสกุล",3,null),l("th",null,null,"ชื่อเล่น",3,null),l("th",null,null,"โทร.",3,null),l("th",null,null,"อีเมล์",3,null),l("th",null,null,"ทำงานที่",3,null),l("th",null,null,"ตำแหน่ง",3,null)],3,null),3,null),l("tbody",null,null,t.value.map((n,s)=>l("tr",null,null,[l("th",null,null,u(n,"id"),1,null),l("td",null,null,u(n,"classNumber"),1,null),l("td",null,null,u(n,"name"),1,null),l("td",null,null,u(n,"nickName"),1,null),l("td",null,null,u(n,"tel"),1,null),l("td",null,null,u(n,"email"),1,null),l("td",null,null,u(n,"workAtCompany"),1,null),l("td",null,null,u(n,"position"),1,null)],1,s)),1,null)],1,null),1,null)],1,"Cj_0")},N=()=>{const[e,t]=i();if(t.value.length<=0)return;const n=[Object.keys(e.value[0]),...e.value].map(h=>Object.values(h).join(",")).join(`
`),s=new Blob([n],{type:"text/csv;charset=utf-8;"}),v=URL.createObjectURL(s),a=document.createElement("a");a.setAttribute("href",v),a.setAttribute("download","2567.csv"),document.body.appendChild(a),a.click()},j=()=>{const[e]=i(),t=b.channel("custom-update-channel").on("postgres_changes",{event:"INSERT",schema:"public",table:"Register2567"},o=>{console.log("Change received!",o),e.value=[...e.value,o.new]}).subscribe();return()=>{t.unsubscribe()}},d=Object.freeze(Object.defineProperty({__proto__:null,_hW:p,s_d2tezVafCPo:j,s_eWi3GbfRjI4:x,s_fH10cqBgBX0:w,s_qsZY38OVQ20:g,s_w0AFpKHL9eo:N},Symbol.toStringTag,{value:"Module"}));export{p as _hW,j as s_d2tezVafCPo,x as s_eWi3GbfRjI4,w as s_fH10cqBgBX0,g as s_qsZY38OVQ20,N as s_w0AFpKHL9eo};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}